{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Validators } from \"@angular/forms\"; // import {ServiceService} from \"./service.service\";\n\nimport { environment } from \"../../environments/environment\";\nlet ReportComponent = class ReportComponent {\n  constructor(fb, validatorOrOpts, asyncValidator) {\n    this.fb = fb;\n    this.datePattern = '/^([0-9]{2})\\\\/([0-9]{2})\\\\/([0-9]{4})$/';\n  }\n\n  ngOnInit() {\n    this.dateForm = this.fb.group({\n      startDate: ['', [Validators.required, Validators.pattern(this.datePattern)]],\n      startTime: ['0:0:0'],\n      endDate: ['', Validators.required, Validators.pattern(this.datePattern)],\n      endTime: ['0:0:0']\n    });\n    const today = new Date();\n    const yyyy = today.getFullYear();\n    let mm = today.getMonth() + 1; // Months start at 0!\n\n    let dd = today.getDate();\n    let ddString = '';\n\n    if (dd < 10) {\n      ddString = '0' + dd;\n    }\n\n    let mmString = '';\n\n    if (mm < 10) {\n      mmString = '0' + mm;\n    }\n\n    const formattedToday = ddString + '/' + mmString + '/' + yyyy;\n    console.log(formattedToday);\n    let init = {\n      startDate: formattedToday,\n      startTime: '0:0:0',\n      endDate: formattedToday,\n      endTime: '0:0:0'\n    };\n    this.dateForm.setValue(init);\n  }\n\n  get_report(startDate, endDate) {\n    let url = environment.serverUrl + '/limsR/IRISNavigationGet-ServiceTest?startdate=29/4/2023 23:50:00&enddate=30/4/2023 0:01:00';\n    var fileName = \"IRis\" + \".csv\";\n    var link = document.createElement(\"a\");\n    link.href = url;\n    link.target = \"_blank\";\n    link.download = fileName;\n    document.body.appendChild(link);\n    console.log(\" ready to fire link \");\n    link.click();\n    document.body.removeChild(link);\n  }\n\n  onSubmit(form) {\n    console.log('Valid?', form.valid); // true or false\n\n    console.log('startDate', this.dateForm.controls.startDate.value);\n    console.log('startTime', this.dateForm.controls.startTime.value);\n    console.log(form.value);\n    const startDate = \"29/4/2023 23:50:00\";\n    const endDate = \"30/4/2023 0:01:00\"; //auto -5\n\n    this.validate(startDate);\n    this.validate(startDate);\n    this.get_report(startDate, endDate);\n  }\n\n  validate(date) {\n    var pattern = /^([0-9]{2})\\/([0-9]{2})\\/([0-9]{4})$/;\n    return pattern.test(date);\n  }\n\n};\nReportComponent = __decorate([Component({\n  selector: 'report',\n  templateUrl: './report.component.html',\n  styleUrls: ['./report.component.css']\n})], ReportComponent);\nexport { ReportComponent };","map":{"version":3,"mappings":"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","names":["Component","Validators","environment","ReportComponent","constructor","fb","validatorOrOpts","asyncValidator","ngOnInit","dateForm","group","startDate","required","pattern","datePattern","startTime","endDate","endTime","today","Date","yyyy","getFullYear","mm","getMonth","dd","getDate","ddString","mmString","formattedToday","console","log","init","setValue","get_report","url","serverUrl","fileName","link","document","createElement","href","target","download","body","appendChild","click","removeChild","onSubmit","form","valid","controls","value","validate","date","test","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\Users\\zhao_h\\Desktop\\IRisReport2\\iris_report\\projects\\iris-report\\src\\app\\report\\report.component.ts"],"sourcesContent":["import {Component, Input, OnInit, VERSION} from '@angular/core';\r\nimport {\r\n  AbstractControlOptions, AsyncValidatorFn,\r\n  FormControl,\r\n  FormGroup,\r\n  NonNullableFormBuilder,\r\n  ValidatorFn,\r\n  Validators\r\n} from \"@angular/forms\";\r\nimport {HttpClient} from \"@angular/common/http\";\r\n// import {ServiceService} from \"./service.service\";\r\nimport {environment} from \"../../environments/environment\";\r\n\r\nexport interface DateRange {\r\n  startDate: FormControl<string>;\r\n  startTime: FormControl<string>;\r\n  endDate: FormControl<string>;\r\n  endTime: FormControl<string>;\r\n\r\n}\r\n\r\n@Component({\r\n  selector: 'report',\r\n  templateUrl: './report.component.html',\r\n  styleUrls: ['./report.component.css']\r\n})\r\nexport class ReportComponent implements OnInit {\r\n  datePattern = '/^([0-9]{2})\\\\/([0-9]{2})\\\\/([0-9]{4})$/';\r\n  protected dateForm!: FormGroup<DateRange>;\r\n\r\n  constructor(private fb: NonNullableFormBuilder , validatorOrOpts?: ValidatorFn | ValidatorFn[] | AbstractControlOptions | null,\r\n              asyncValidator?: AsyncValidatorFn | AsyncValidatorFn[] | null) {\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.dateForm = this.fb.group({\r\n      startDate: ['', [\r\n        Validators.required, Validators.pattern(this.datePattern)\r\n      ]],\r\n      startTime: ['0:0:0'],\r\n      endDate: ['', Validators.required, Validators.pattern(this.datePattern)],\r\n      endTime: ['0:0:0'],\r\n    });\r\n\r\n\r\n    const today = new Date();\r\n    const yyyy = today.getFullYear();\r\n    let mm = today.getMonth() + 1; // Months start at 0!\r\n    let dd = today.getDate();\r\n\r\n    let ddString = '';\r\n    if (dd < 10) {\r\n      ddString = '0' + dd;\r\n    }\r\n\r\n    let mmString = '';\r\n    if (mm < 10) {\r\n      mmString = '0' + mm;\r\n    }\r\n\r\n    const formattedToday = ddString + '/' + mmString + '/' + yyyy;\r\n    console.log(formattedToday);\r\n\r\n    let init = {\r\n      startDate: formattedToday,\r\n      startTime: '0:0:0',\r\n      endDate: formattedToday,\r\n      endTime: '0:0:0',\r\n    }\r\n    this.dateForm.setValue(init);\r\n  }\r\n\r\n\r\n  get_report(startDate: string, endDate: string) {\r\n\r\n\r\n    let url = environment.serverUrl + '/limsR/IRISNavigationGet-ServiceTest?startdate=29/4/2023 23:50:00&enddate=30/4/2023 0:01:00';\r\n\r\n\r\n    var fileName = \"IRis\" + \".csv\";\r\n    var link = document.createElement(\"a\");\r\n\r\n    link.href = url;\r\n    link.target = \"_blank\";\r\n    link.download = fileName;\r\n    document.body.appendChild(link);\r\n    console.log(\" ready to fire link \");\r\n    link.click();\r\n    document.body.removeChild(link);\r\n\r\n  }\r\n\r\n  onSubmit(form: FormGroup) {\r\n    console.log('Valid?', form.valid); // true or false\r\n    console.log('startDate', this.dateForm.controls.startDate.value);\r\n    console.log('startTime', this.dateForm.controls.startTime.value);\r\n\r\n\r\n    console.log(form.value);\r\n\r\n    const startDate = \"29/4/2023 23:50:00\";\r\n    const endDate = \"30/4/2023 0:01:00\";  //auto -5\r\n\r\n    this.validate(startDate);\r\n    this.validate(startDate);\r\n\r\n    this.get_report(startDate, endDate);\r\n\r\n  }\r\n\r\n  validate(date: string) {\r\n\r\n    var pattern = /^([0-9]{2})\\/([0-9]{2})\\/([0-9]{4})$/;\r\n    return pattern.test(date)\r\n\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}